import{a as F}from"./chunk-TBFD5B5Q.js";import{i as k}from"./chunk-6LRXWN5R.js";import{B as c,Ca as j,F as S,Ja as l,L as _,Ma as C,Na as w,Oa as M,Ra as f,Va as x,ab as B,db as T,j as u,k as g,m,n as v,o as I,p as y,ya as b}from"./chunk-HOEKJOMB.js";var D=(()=>{let e=class e extends C{constructor(o,s,r,a){super({name:"conferencemessage"},o,s,r,a),this._helper=v(F),this.conferencemessages=[],this.messagesBySessionId={},this.setMessagesBySessionId=this._helper.createParentIdToChildrenIds(this.messagesBySessionId,this.conferencemessages,"session"),this.get().subscribe(n=>{this.conferencemessages.push(...n),this.setMessagesBySessionId()}),a.on("conferencemessage_create").subscribe(n=>{this.conferencemessages.push(n),this.setMessagesBySessionId()}),a.on("conferencemessage_delete").subscribe(n=>{this.conferencemessages.splice(this.conferencemessages.findIndex(h=>h._id===n._id),1),this.setMessagesBySessionId()})}};e.\u0275fac=function(s){return new(s||e)(m(M),m(w),m(f),m(l))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var p=(()=>{let e=class e{get rows(){return this.sessionId?this._sc.messagesBySessionId[this.sessionId]||[]:this._sc.conferencemessages}constructor(o,s,r,a,n,h){this._translate=o,this._alert=s,this._sc=r,this._form=a,this._core=n,this._router=h,this.sessionId=this._router.url.includes("/messages/")?this._router.url.replace("/messages/",""):"",this.columns=["name","description"],this.form=this._form.getForm("messages",{formId:"messages",title:"Messages",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill messages title"},{name:"Label",value:"Title"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill messages description"},{name:"Label",value:"Description"}]}]}),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(i,d)=>{this.sessionId&&(i.session=this.sessionId),this._sc.create(i),d()}})},update:i=>{this._form.modal(this.form,[],i).then(d=>{this._core.copy(d,i),this._sc.update(i)})},delete:i=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this Conferencemessage?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._sc.delete(i)}}]})},buttons:[{icon:"cloud_download",click:i=>{this._form.modalUnique("messages","url",i)}}]}}};e.\u0275fac=function(s){return new(s||e)(c(x),c(f),c(D),c(T),c(l),c(b))},e.\u0275cmp=I({type:e,selectors:[["ng-component"]],decls:1,vars:3,consts:[["title","Messages",3,"columns","config","rows"]],template:function(s,r){s&1&&_(0,"wtable",0),s&2&&S("columns",r.columns)("config",r.config)("rows",r.rows)},dependencies:[B]});let t=e;return t})();var q=[{path:"",component:p},{path:":message_id",component:p}],V=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=y({type:e}),e.\u0275inj=g({imports:[j.forChild(q),k]});let t=e;return t})();export{V as MessagesModule};
