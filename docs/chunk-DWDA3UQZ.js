import{a as M}from"./chunk-ITMR6HDU.js";import{a as I}from"./chunk-DPTG3VZD.js";import"./chunk-MBNO6M2M.js";import{k as S}from"./chunk-WN6D2TP3.js";import{Aa as w,B as h,C as l,E as u,Ea as k,G as m,K as a,L as r,La as T,Ta as x,Xa as b,Z as c,bb as A,cb as P,fb as L,k as v,o as C,p as y,qa as g}from"./chunk-BGJDUI7W.js";function F(e,t){e&1&&(a(0,"i",6),c(1,"check_circle"),r())}function N(e,t){e&1&&(a(0,"i",7),c(1,"cancel"),r())}function R(e,t){if(e&1&&u(0,F,2,0,"i",4)(1,N,2,0,"i",5),e&2){let o=t.$implicit;m("ngIf",o.isAnonymous),h(),m("ngIf",!o.isAnonymous)}}function O(e,t){e&1&&(a(0,"i",6),c(1,"check_circle"),r())}function $(e,t){e&1&&(a(0,"i",7),c(1,"cancel"),r())}function U(e,t){if(e&1&&u(0,O,2,0,"i",4)(1,$,2,0,"i",5),e&2){let o=t.$implicit;m("ngIf",o.isMultiple),h(),m("ngIf",!o.isMultiple)}}function V(e,t){e&1&&(a(0,"i",6),c(1,"check_circle"),r())}function Y(e,t){e&1&&(a(0,"i",7),c(1,"cancel"),r())}function G(e,t){if(e&1&&u(0,V,2,0,"i",4)(1,Y,2,0,"i",5),e&2){let o=t.$implicit;m("ngIf",o.isQuiz),h(),m("ngIf",!o.isQuiz)}}var _=(()=>{let t=class t{get rows(){return this.sessionId?this._sc.pollsBySessionId[this.sessionId]||[]:this._sc.conferencepolls}constructor(f,s,p,j,B,E,Q){this._translate=f,this._alert=s,this._sc=p,this._form=j,this._core=B,this._router=E,this.us=Q,this.sessionId=this._router.url.includes("/polls/")?this._router.url.replace("/polls/",""):"",this.columns=["question","correctAnswer","isAnonymous","isMultiple","isQuiz","startTime","endTime"],this.commentsComponents=[],this.votesComponents=[],this.answersComponents=[],this.form=this._form.getForm("polls",{formId:"polls",title:"Polls",components:[{name:"Text",key:"question",focused:!0,required:!0,fields:[{name:"Placeholder",value:"fill question text"},{name:"Label",value:"Question"}]},{name:"Text",key:"correctAnswer",fields:[{name:"Placeholder",value:"fill correct answer text"},{name:"Label",value:"Correct Answer"}]},{components:this.answersComponents},{name:"Button",key:"answers",fields:[{name:"Label",value:"Add Answer"},{name:"Click",value:()=>{let n={components:[{name:"Tags",key:"answers",fields:[{name:"Placeholder",value:"fill answers"},{name:"Label",value:"Answers"}]}]};this.answersComponents.push(n)}}]},{name:"Boolean",key:"isAnonymous",fields:[{name:"Label",value:"Anonymous"}]},{name:"Boolean",key:"isMultiple",fields:[{name:"Label",value:"Multiple"}]},{name:"Boolean",key:"isQuiz",fields:[{name:"Label",value:"Quiz"}]},{components:this.commentsComponents},{name:"Button",key:"comments",fields:[{name:"Label",value:"Add Commnet"},{name:"Click",value:()=>{let n={components:[{name:"Text",key:"comments[].comment",fields:[{name:"Placeholder",value:"fill comment"},{name:"Label",value:"Comment"}]},{name:"Button",fields:[{name:"Label",value:"Remove"},{name:"Click",value:()=>{let i=this.commentsComponents.indexOf(n);i!==-1&&this.commentsComponents.splice(i,1)}}]}]};this.commentsComponents.push(n)}}]},{components:this.votesComponents},{name:"Button",key:"votes",fields:[{name:"Label",value:"Add Vote"},{name:"Click",value:()=>{let n={components:[{name:"Text",key:"votes[].answer",fields:[{name:"Placeholder",value:"fill answer"},{name:"Label",value:"Answer"}]},{name:"Tags",key:"votes[].answers",fields:[{name:"Placeholder",value:"fill answers"},{name:"Label",value:"Answers"}]},{name:"Button",fields:[{name:"Label",value:"Remove"},{name:"Click",value:()=>{let i=this.votesComponents.indexOf(n);i!==-1&&this.votesComponents.splice(i,1)}}]}]};this.votesComponents.push(n)}}]},{name:"DateTime",key:"startTime",fields:[{name:"Label",value:"Start Time"}]},{name:"DateTime",key:"endTime",fields:[{name:"Label",value:"End Time"}]}]}),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(n,i)=>{if(this.sessionId&&(n.session=this.sessionId),!n.isAnonymous){let q=n.comments.map(d=>({answer:d.comment,author:this.us.user._id})),z=n.votes.map(d=>({answer:d.answer,answers:d.answers,author:this.us.user._id}));n.comments=q,n.votes=z}this._sc.create(n),i()}})},update:n=>{this._form.modal(this.form,[],n).then(i=>{this._core.copy(i,n),this._sc.update(n)})},delete:n=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this Conferencepoll?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._sc.delete(n)}}]})},buttons:[{icon:"cloud_download",click:n=>{this._form.modalUnique("polls","url",n)}}]}}};t.\u0275fac=function(s){return new(s||t)(l(b),l(x),l(M),l(L),l(T),l(w),l(I))},t.\u0275cmp=C({type:t,selectors:[["ng-component"]],decls:4,vars:3,consts:[["title","Polls",3,"columns","config","rows"],["cell","isAnonymous"],["cell","isMultiple"],["cell","isQuiz"],["class","material-icons checked",4,"ngIf"],["class","material-icons",4,"ngIf"],[1,"material-icons","checked"],[1,"material-icons"]],template:function(s,p){s&1&&(a(0,"wtable",0),u(1,R,2,2,"ng-template",1)(2,U,2,2,"ng-template",2)(3,G,2,2,"ng-template",3),r()),s&2&&m("columns",p.columns)("config",p.config)("rows",p.rows)},dependencies:[g,P,A],styles:[".checked[_ngcontent-%COMP%]{color:#256eff}"]});let e=t;return e})();var H=[{path:"",component:_},{path:":poll_id",component:_}],ae=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=y({type:t}),t.\u0275inj=v({imports:[k.forChild(H),S]});let e=t;return e})();export{ae as PollsModule};
